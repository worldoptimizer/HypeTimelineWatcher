/*
 Hype Timeline Watcher Extension
 Copyright (2024) Max Ziebell, (https://maxziebell.de). MIT-license
*/
'use strict';!1==="HypeTimelineWatcher"in window&&(window.HypeTimelineWatcher=function(){function h(c,a,d,b){var e=a?a.element().id+":"+d:d;g[e]={onProgressCallback:b.onProgressCallback,onCompleteCallback:b.onCompleteCallback,lastTime:-1,hypeDocument:c,symbolInstance:a,timelineName:d};f||=requestAnimationFrame(k)}function k(){for(var c in g)if(g.hasOwnProperty(c)){var a=g[c];var d=a.symbolInstance?a.symbolInstance.currentTimeInTimelineNamed(a.timelineName):a.hypeDocument.currentTimeInTimelineNamed(a.timelineName);
if(d!==a.lastTime){a.lastTime=d;var b=a.hypeDocument,e=a.onProgressCallback;d={timelineName:a.timelineName,currentTime:d,symbolInstance:a.symbolInstance};if(e&&"function"===typeof e)e(b,null,d);else if("function"===typeof b.functions().onTimelineProgress)b.functions().onTimelineProgress(b,null,d);else if("function"===typeof b.onTimelineProgress)b.onTimelineProgress(b,null,d);b=a;e=a.timelineName;b=b.symbolInstance?b.symbolInstance.currentTimeInTimelineNamed(e)===b.symbolInstance.durationForTimelineNamed(e):
b.hypeDocument.currentTimeInTimelineNamed(e)===b.hypeDocument.durationForTimelineNamed(e);b&&l(a.hypeDocument,a.symbolInstance,a.timelineName,a.onCompleteCallback)}}f=requestAnimationFrame(k)}function l(c,a,d,b){a={timelineName:d,symbolInstance:a};if(b&&"function"===typeof b)b(c,null,a);else if("function"===typeof c.functions().onTimelineComplete)c.functions().onTimelineComplete(c,null,a);else if("function"===typeof c.onTimelineComplete)c.onTimelineComplete(c,null,a)}!1==="HYPE_eventListeners"in window&&
(window.HYPE_eventListeners=[]);var g={},f=null;window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(c,a,d){c.isTimelineComplete=function(b){return c.currentTimeInTimelineNamed(b)===c.durationForTimelineNamed(b)};c.watchTimelineByName=function(b,e={}){h(c,null,b,e)}}});window.HYPE_eventListeners.push({type:"HypeSymbolLoad",callback:function(c,a,d){var b=c.getSymbolInstanceById(a.id);b.isTimelineComplete=function(e){return b.currentTimeInTimelineNamed(e)===b.durationForTimelineNamed(e)};
b.watchTimelineByName=function(e,m={}){h(c,b,e,m)}}});window.HYPE_eventListeners.push({type:"HypeTimelineComplete",callback:function(c,a,d){l(c,null,d.timelineName)}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",callback:function(c,a,d){g={};f&&(cancelAnimationFrame(f),f=null)}});window.HYPE_eventListeners.push({type:"HypeSceneUnload",callback:function(c,a,d){g={};f&&(cancelAnimationFrame(f),f=null)}});return{version:"1.0.9"}}());
